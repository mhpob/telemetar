---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# telemetar

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/telemetar)](https://CRAN.R-project.org/package=telemetar)
<!-- badges: end -->

This package aims to provide [`targets`](https://docs.ropensci.org/targets/) archetypes for analysis of fish acoustic telemetry data *a la* the [`tarchetypes`](https://docs.ropensci.org/tarchetypes/) package. The eventual hope is to play nicely with, or even become a part of, the [R Targetopia](https://wlandau.github.io/targetopia/); if you'd like to contribute please follow the [Targetopia development guidelines](https://wlandau.github.io/targetopia/contributing.html).

Like the package, the name is a work in progress: [vote for your favorite or suggest another name here](https://github.com/mhpob/telemetar/discussions/2)! Some candidates:

-   `telemetar` (current)
-   `sharketypes`
-   ~~`egrets`~~ (taken)
-   `trackytypes`
-   `trackets`

## Installing
If you'd like to give what has been put together a whirl, install the current version of this package from GitHub.

```{r, eval=FALSE}
remotes::install_github("mhpob/telemetar")
```

## Reading and combining VUE CSVs
`tar_vue_csvs` takes a directory of VUE-exported CSVs, tracks them for changes, and imports the relevant data. This assumes that your data is housed in a series of sub-directories. Something like:

```
project_detections/
  |
  |-- January tending/
      |-- receiver1_jan.csv
      |-- receiver2_jan.csv
  |-- March tending/
      |-- receiver1_march.csv
      |-- receiver2_march.csv
```


```{r}
targets::tar_script({
  library(telemetar)
  
  tar_vue_csvs('c:/users/darpa2/analysis/chesapeake-backbone/embargo/raw')
})

targets::tar_make()
```

```{r}
targets::tar_objects()

head(targets::tar_read(data))
```

Now, the importing step and any further analyses that depend on our detection data will only be run if a file in that directory (or sub-directories) is added or removed.

```{r}
targets::tar_make()
```

